% Systemdokumentation OOP3
% Unterlage fÃ¼r Studenten als Leitfaden fÃ¼r die Erstellung einer SystemDoku
% 17. Oktober 2022
% ---------------------------------------------------------------------------



% Dokumentklasse
% --------------
\documentclass[12pt,naustrian,a4widepaper]{scrartcl}   
% article style
%   - 11pt Schriftgroesse
%   - new austrian (neue Rechtschreibung)
%   - Papierformat A4
%   - pdf-hyperlinks


% Packages
% --------
\usepackage[utf8]{inputenc}  % fuer Umlaute, Ü
\usepackage[T1]{fontenc}
\usepackage{a4wide}
\usepackage{times}      % Times Schriften (zusammen mit fontencoding, s.o.)

\usepackage{babel}
\usepackage{graphicx}	  % fÃ¼r das Einbinden von Grafiken
\usepackage{color}      % fÃ¼r fÃ¤rbigen Text
\usepackage{framed}     % fÃ¼r (Text-) Rahmen
\usepackage{fancyhdr}   % fÃ¼r Kopf- und Fusszeilen
\usepackage{listings}   % fÃ¼r den Sourcecode
\usepackage{pdfpages}

\pagestyle{fancy}       % Kopf- / Fusszeile aktivieren

\definecolor{failred}{rgb}{0.7, 0.0, 0.0}
\definecolor{okgreen}{rgb}{0.0, 0.5, 0.0}
\definecolor{gray}{rgb}{0.0, 0.5, 0.0}

\lstdefinelanguage{TestOutput}{
    morekeywords={},
    morecomment=[l]{//},
    morestring=[b]",
    sensitive=false,
}

\lstdefinestyle{teststyle}{
    language=TestOutput,
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\color{black},
    commentstyle=\color{gray},
    stringstyle=\color{black},
    showstringspaces=false,
    breaklines=true,
    frame=single,
    numbers=left,
    numberstyle=\tiny\color{gray},
    postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
    literate={OK}{{\textcolor{okgreen}{OK}}}2
             {Fail}{{\textcolor{failred}{Fail}}}4,
}


\lstdefinestyle{cppstyle}{
  language=C++,
  basicstyle=\ttfamily\tiny,
  keywordstyle=\color{blue},
  commentstyle=\textcolor{okgreen},
  stringstyle=\color{red},
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  breaklines=true,
  frame=single
}



% Seitenspiegel
% -------------

\typearea{8}	% Festlegung des Seitenspiegels gem. Koma. 4..groÃŸ, 9..klein


% Kopfzeile
% ---------
\lhead{{\footnotesize{s. Offenberger, S. Vogelhuber}}}   %  (links)
\chead{{\footnotesize{Systemdokumentation - Filesystem}}} %  (mitte)
\rhead{{\footnotesize{Seite \thepage}}}      %  (rechts)

% Fusszeile
% ---------
\lfoot{}  % links
\cfoot{}  % mitte 
\rfoot{}  % rechts

% Absatzformatierung
% ------------------
\setlength{\parindent}{0cm}   % EinrÃ¼ckung der 1. Zeile jedes Absatzes
\setlength{\parskip}{10pt}    % Abstand zwischen den AbsÃ¤tzen


% Package fÃ¼r Hyperlinks (mit pdf-Optionen)
% -----------------------------------------
\usepackage[
urlcolor=blue,		% blaue weblinks
linkcolor=black,	% interne Links sind schwarz
colorlinks=true,        % links werden eingefÃ¤rbt
pdfstartview=FitH,      % PDF-Anzeige: Fensterbreite
pdfborder={0 0 0},      % keine Umrandung um links
pdftitle   ={Systemdokumentation},% Referenzen in der Pdf-Datei
pdfauthor  ={M. Mustermann, S. Sorglos},
pdfsubject ={Systemdoku},
pdfcreator ={Der Creator},
pdfproducer={Der Producer},
pdfkeywords={Dokumentation, Systemdokumentation}
]{hyperref}


% Beginn des Dokumentes
% ---------------------
\begin{document}

\includepdf[pages= 1-2]{Uebung06_Deckblatt.pdf}


\selectlanguage{naustrian}   % oder "american" fÃ¼r engl. Texte

% Titelblatt
% ----------
\title {\vspace{1cm}
       \includegraphics[width=8cm]{./Images/FhOOeLogoOkt2009_HSD_Rot_pastell}\\
       \vspace{2cm}
       {\textbf{Systemdokumentation\\Projekt Filesystem}}\\
       \vspace{5mm}
       {\small{Version 1.0}}\\
       \vspace{5mm}
}

\author{\small{S. Offenberger, S. Vogelhuber}}
\date  {\small{Hagenberg, \today}}
\maketitle

%\begin{abstract}
%Dieses Dokument zeigt den prinzipiellen Aufbau einer Systemdokumentation fÃ¼r Software-Projekte. Die einzelnen Kapitel sind mit Kommentaren versehen, welche die Struktur und den Inhalt erlÃ¤utern. 
%\end{abstract}

\clearpage

% Inhalts-, Tabellen- und Bildverzeichnis (werden generiert)
% ----------------------------------------------------------
\tableofcontents
% \listoftables
% \listoffigures
\clearpage



\section{Organisatorisches}

\subsection{Team}
\begin{itemize}
	\item Simon Offenberger, Matr.-Nr.: S2410306027, E-Mail: Simon.Offenberger@fh-hagenberg.at
	\item Simon Vogelhuber, Matr.-Nr.: S2410306014, E-Mail: Simon.Vogelhuber@fh-hagenberg.at	
\end{itemize}

\subsection{Aufteilung der Verantwortlichkeitsbereiche}
\begin{itemize}
	\item Simon Offenberger
		\begin{itemize}
			\item Design Klassendiagramm
			\item Implementierung und Test der Klassen: 
			\begin{itemize}
				\item IVisitor,
				\item FilterVisitor, 
				\item FilterFileVisitor,
				\item FilterLinkVisitor,
				\item DumpVisitor und
				\item FSObjectFactory
			\end{itemize}
			\item Implementierung des Testtreibers
			\item Dokumentation
		\end{itemize}
	\item Simon Vogelhuber
		\begin{itemize}
			\item Design Klassendiagramm
			\item Implementierung und Komponententest der Klassen: 
			\begin{itemize}
				\item FSObject
				\item File, 
				\item iFolder, 
				\item iLink, 
				\item Folder und  
				\item Link 
			\end{itemize}
			\item Implementierung des Testtreibers
			\item Dokumentation
		\end{itemize}	
	\end{itemize}
	
	\subsection{Aufwand}
	
	\begin{itemize}
		\item Simon Offenberger: geschätzt 7 Ph / tatsächlich 9 Ph
		\item Simon Vogelhuber:  geschätzt 8 Ph / tatsächlich 7 Ph
	\end{itemize}
	
	\clearpage
	\section{Anforderungsdefinition (Systemspezifikation)}
	
	Das zu entwickelnde System dient der Simulation eines einfachen Dateisystems für ein
	eingebettetes System. Ziel ist es, die Struktur und das Verhalten eines hierarchischen
	Dateisystems softwaretechnisch abzubilden und durch geeignete Entwurfsmuster
	(Composite, Factory, Visitor) erweiterbar und wartbar zu gestalten.  
	Die Anforderungen ergeben sich aus der gegebenen Systemspezifikation der Übung.
	
	\subsection{Systemüberblick}
	Das System verwaltet drei Arten von Dateisystemelementen:
	\begin{itemize}
    \item \textbf{Dateien}
    \item \textbf{Ordner}
    \item \textbf{Verweise} (Referenzen auf Dateien, Ordner oder weitere Verweise)
	\end{itemize}
	
	Diese Elemente bilden gemeinsam eine hierarchische Struktur, in der Ordner beliebige
	Kombinationen dieser Elemente enthalten können. Jedes Element besitzt einen Namen,
	der nachträglich veränderbar ist.
	
	\subsection{Funktionale Anforderungen}
	
	\subsubsection{Dateien}
	Eine Datei verfügt über folgende unveränderliche Eigenschaften, die bei ihrer Erzeugung
	festgelegt werden:
	\begin{itemize}
    \item Blockgröße auf dem Speichermedium (Bytes)
    \item Anzahl reservierter Blöcke
	\end{itemize}
	Zusätzlich wird die aktuelle Dateigröße in Bytes verwaltet.  
	Das Schreiben in eine Datei erfolgt über:
	\begin{itemize}
    \item \texttt{Write(size\_t const bytes)}
	\end{itemize}
	Die Datei darf niemals größer werden als der durch die reservierten Blöcke bereitgestellte Speicher.
	
	\subsubsection{Ordner}
	Ein Ordner kann beliebig viele Dateien, Verweise und weitere Ordner enthalten.
	Er bildet die Grundlage des hierarchischen Dateisystems.
	
	\subsubsection{Verweise}
	Ein Verweis referenziert exakt ein Zielobjekt (Datei, Ordner oder weiteren Verweis).
	Der Name des Verweises kann verändert werden, zusätzlich muss der Name des Zielobjekts
	im Rahmen der Filterausgabe ausgegeben werden.
	
	\subsection{Erzeugung der Elemente}
	Für die Erstellung aller Dateisystemelemente ist eine einfache \textbf{Fabrik} zu implementieren.
	Diese kapselt die Instanziierungslogik und stellt sicher, dass die Objekterzeugung einheitlich erfolgt.
	\clearpage
	\subsection{Besucher (Visitor) Anforderungen}
	
	\subsubsection{Visitor: Dump}
	\begin{itemize}
    \item Gibt die gesamte Dateisystemhierarchie aus.
    \item Ausgabe sowohl auf der Standardausgabe als auch in einer Datei möglich.
    \item Muss Dateien, Ordner und Verweise in strukturierter Form darstellen.
	\end{itemize}
	
	\subsubsection{Visitor: FilterFiles}
	\begin{itemize}
    \item Filtert Dateien anhand eines minimalen und maximalen Größenschwellwerts.
    \item Ausgabe aller gefilterten Dateien mit ihrem vollständigen Pfad.
    \item Bei Verweisen muss zusätzlich der Name des referenzierten Zielobjekts ausgegeben werden.
	\end{itemize}
	
	
	\clearpage
	\section{Systementwurf}
	\subsection{Klassendiagramm}
	\begin{center}
		\includegraphics[width=16cm]{./FileSystem.png}
	\end{center}
	\newpage
	
	\subsection{Designentscheidungen}
	
	Aus der Aufgabenstellung lassen sich folgenden Designpattern ableiten:
	\begin{itemize}
		\item Composite Pattern für die hierarchische Struktur des Dateisystems.
		\item Factory Pattern für die einheitliche Objekterzeugung der Dateisystemelemente.
		\item Visitor Pattern für die Implementierung der verschiedenen Besucheroperationen.
		\item Template Methode Pattern für die gemeinsame Struktur der Filter Visitor.
	\end{itemize}
	\subsection{Composite Pattern}
	Dieses Pattern wird verwendet, um die hierarchische Struktur des Dateisystems abzubilden.
	Die Basisklasse \texttt{FSObject} definiert die gemeinsamen Schnittstellen für alle Dateisystemelemente.
	\\Ordner implementieren die Fähigkeit, andere \texttt{FSObject}-Instanzen zu enthalten
	(wie Dateien, Verweise und weitere Ordner), wodurch eine Baumstruktur entsteht.
	\\Bei der gewählten Implementierung wurde besonders darauf geachtet, dass das Liskovsersche Substitutionsprinzip eingehalten wird.
	Aus diesem Grund wurden die Methoden zur Verwaltung von Kindobjekten nur in der \texttt{Folder}-Klasse implementiert.
	Die Schnittstelle für die Methoden der besonderen Kindklassen wurden in capabiltiy Interfaces ausgelagert (\texttt{IFolder}, \texttt{ILink}).
\\Dadurch wird verhindert, dass Objekte, die keine Kinder enthalten können (wie Dateien und Verweise),
diese Methoden erben und somit das Substitutionsprinzip verletzen.

\subsection{Factory Pattern}
Für die konkrete Implementierung der Objekterzeugung wurde das Pattern Simple Factory verwendet.
Die Klasse \texttt{FSObjectFactory} kapselt die Logik zur Erstellung von Dateien, Ordnern und Verweisen.
Dies ermöglicht eine zentrale Verwaltung der Erzeugungslogik und erleichtert zukünftige Erweiterungen.
Beim konkreten Desing der Factory wurde auf das Interface zwischen Factory und Client verzichtet,
da die Factory nur eine einzige Implementierung besitzt und keine weiteren Varianten geplant sind.
\\Dadurch wurde die Komplexität reduziert, jedoch bleibt die Erfüllung des Dependency Inversion Prinzips aus.
Dies ist aber über die Verwendung der Simple Factory hinweg vertretbar.\\ (Dies wurde mit Prof. Wiesinger diskutiert, und ist hier zulässig.)

\subsection{Visitor Pattern}
Das Visitor Pattern wird verwendet, um verschiedene Operationen auf den Dateisystemelementen
durchzuführen, ohne die Klassenhierarchie der Elemente zu verändern.
Die Basisschnittstelle \texttt{IVisitor} definiert die Besuchsmethoden für jede Art von Dateisystemelement.
Konkrete Besucherklassen wie \texttt{DumpVisitor} und \texttt{FilterFileVisitor} implementieren diese Methoden,
um spezifische Funktionalitäten bereitzustellen.

\subsection{Template Methode Pattern}
Das Template Methode Pattern wird in den Filter Visitor Klassen verwendet,
um die gemeinsame Struktur der Filteroperationen zu definieren.
\\Die abstrakte Klasse \texttt{FilterVisitor} stellt die Template Methode bereit,
die den allgemeinen Ablauf der Filterung definiert.	
Die konkreten Filterklassen wie \texttt{FilterFileVisitor} und \texttt{FilterLinkVisitor}
implementieren die spezifischen Filterkriterien, während die allgemeine Logik in der Basisklasse verbleibt.
Somit ist die Erweiterung um weitere Filtertypen einfach möglich, ohne die bestehende Struktur zu verändern.




\color{black}

\section{Dokumentation der Komponenten (Klassen)}
Die HTML-Startdatei befindet sich im Verzeichnis \href{run:./../doxy/html/index.html}{./../doxy/html/index.html}

\clearpage
\section{Testprotokollierung}
\lstinputlisting[style=teststyle]{../TestOutput.txt}

\clearpage
\section{Quellcode}

\subsection{Object.hpp}
\lstinputlisting[style=cppstyle]{../Object.h}
\clearpage
\subsection{FSObjectFactory.hpp}
\lstinputlisting[style=cppstyle]{./../FSObjectFactory.hpp}
\clearpage
\subsection{FSObjectFactory.cpp}
\lstinputlisting[style=cppstyle]{./../FSObjectFactory.cpp}

\clearpage
\subsection{Filesystem.hpp}
\lstinputlisting[style=cppstyle]{./../Filesystem.hpp}
\clearpage
\subsection{Filesystem.cpp}
\lstinputlisting[style=cppstyle]{./../Filesystem.cpp}

\clearpage
\subsection{FSObject.hpp}
\lstinputlisting[style=cppstyle]{./../FSObject.hpp}
\clearpage
\subsection{FSObject.cpp}
\lstinputlisting[style=cppstyle]{./../FSObject.cpp}
\clearpage

\subsection{File.hpp}
\lstinputlisting[style=cppstyle]{./../File.hpp}
\clearpage

\subsection{File.cpp}
\lstinputlisting[style=cppstyle]{./../File.cpp}
\clearpage

\subsection{IFolder.hpp}
\lstinputlisting[style=cppstyle]{./../IFolder.hpp}
\clearpage

\subsection{Folder.hpp}
\lstinputlisting[style=cppstyle]{./../Folder.hpp}
\clearpage

\subsection{Folder.cpp}
\lstinputlisting[style=cppstyle]{./../Folder.cpp}
\clearpage

\subsection{ILink.hpp}
\lstinputlisting[style=cppstyle]{./../ILink.hpp}
\clearpage

\subsection{Link.hpp}
\lstinputlisting[style=cppstyle]{./../Link.hpp}
\clearpage

\subsection{Link.cpp}
\lstinputlisting[style=cppstyle]{./../Link.cpp}
\clearpage

\subsection{IVisitor.hpp}
\lstinputlisting[style=cppstyle]{./../IVisitor.hpp}
\clearpage

\subsection{FilterVisitor.hpp}
\lstinputlisting[style=cppstyle]{./../FilterVisitor.hpp}
\clearpage

\subsection{FilterVisitor.cpp}
\lstinputlisting[style=cppstyle]{./../FilterVisitor.cpp}
\clearpage

\subsection{FilterFileVisitor.hpp}
\lstinputlisting[style=cppstyle]{./../FilterFileVisitor.hpp}
\clearpage

\subsection{FilterFileVisitor.cpp}
\lstinputlisting[style=cppstyle]{./../FilterFileVisitor.cpp}
\clearpage

\subsection{FilterLinkVisitor.hpp}
\lstinputlisting[style=cppstyle]{./../FilterLinkVisitor.hpp}
\clearpage

\subsection{FilterLinkVisitor.cpp}
\lstinputlisting[style=cppstyle]{./../FilterLinkVisitor.cpp}
\clearpage

\subsection{DumpVisitor.hpp}
\lstinputlisting[style=cppstyle]{./../DumpVisitor.hpp}
\clearpage

\subsection{DumpVisitor.cpp}
\lstinputlisting[style=cppstyle]{./../DumpVisitor.cpp}
\clearpage

\subsection{main.cpp}
\lstinputlisting[style=cppstyle]{./../main.cpp}
\clearpage

\subsection{Test.hpp}
\lstinputlisting[style=cppstyle]{./../Test.hpp}
	

% Literaturverzeichnis
% --------------------
%\begin{thebibliography}{99}
%\bibitem{Pomberger} Pomberger G., Blaschek G. : \textit{Software Engineering: Prototyping und objektorientert Software-Entwicklung}. Hanser, 1996
%
%\end{thebibliography}


% Ende des Dokuments
% ------------------
\end{document}
